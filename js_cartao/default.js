var PagarMe=PagarMe||{};PagarMe.Checkout=PagarMe.Checkout||{},function(t){t.Animations={setup:function(){$(".pagarme-checkout-step.hidden").css({opacity:0,display:"none"}),$(".pagarme-checkout-step.next").css({left:"100px"}),$(".pagarme-checkout-step.previous").css({left:"-100px"}),$(".pagarme-checkout-step:not(.hidden)").css({opacity:1,left:0,display:"block"})},openModal:function(t){$("#pagarme-checkout-ui").animate({opacity:1},function(){$("#pagarme-modal-box").animate({top:0,opacity:1},300,$.bez([0,0,0,1]),function(){t&&t()})})},closeModal:function(t){$("#pagarme-modal-box").animate({opacity:0,top:-90},300,$.bez([0,0,1,0]),function(){$("#pagarme-checkout-ui").animate({opacity:0},t)})},stepOut:function(t,e){var o,a;t.direction>0?(a="100px",o="next"):(a="-100px",o="previous");var n=function(e){t.element.animate({left:a,opacity:0},150,"linear",function(){$(this).hide(),$(this).addClass(o+" hidden"),e&&e()})};if(t.moveUp){var i=$(document).scrollTop();$("html,body").animate({scrollTop:0},i,$.bez[1],function(){n(e)}),$("input,textarea,select,option").filter(":focus").blur()}else n(e)},stepIn:function(t,e){t.element.show(),t.element.removeClass("previous next hidden"),t.element.animate({left:0,opacity:1},750,$.bez([.22,1.64,.32,.95]),function(){e&&e()})},beginAuthorization:function(e,o){var a=function(e,o,a){var n=$("#pagarme-checkout-step-title");t.Animations.aux.oldTitle=n.text();var i=!1;n.animate({opacity:0},function(){n.text("Processando...").animate({opacity:1})}),$("#pagarme-checkout-amount-information").animate({opacity:0}),t.Animations.aux.buttonBuffer=e,t.Animations.aux.buttonTextBuffer=e.html(),e.animate({color:o},400,function(){var t=$('<div class="spinner"></div>');t.css({position:"absolute",left:"50%",top:"50%",width:30,height:30,marginTop:-21,marginLeft:-21}),t.hide(),e.css({position:"relative"}).html("").append(t),t.fadeIn(),e.animate({color:"#fff"},400,function(){$("#pagarme-checkout-ui").animate({scrollTop:0},2*$("#pagarme-checkout-ui").scrollTop(),$.bez[1]),i||(a&&a(),i=!0)})})};if("pagarme-modal-box-step-choose-method"==e.step.attr("id")){e.step.find("#pagarme-checkout-boleto-button .button-indicator").fadeOut();var n=e.step.find("#pagarme-checkout-boleto-button");e.step.find("#pagarme-checkout-card-button").slideUp(function(){n.css({borderRadius:6}).removeClass("darker-hover arrow"),a(n.find("button"),n.css("background-color"),o)})}else{var i=e.step.find("button");a(i,i.css("background-color"),function(){t.Animations.aux.oldStepHeight=e.step.height(),e.step.css({overflow:"hidden",position:"absolute",height:e.step.height()}),i.css({position:"absolute",bottom:0,left:0,zIndex:100}),e.step.find("#pagarme-checkout-card-container, .pagarme-checkout-input-container").animate({opacity:0}),e.step.animate({height:80},600,$.bez([0,0,.4,1]),function(){setTimeout(o,1e3)})})}},endAuthorization:function(t,e){e()},success:function(t,e){if(t.boleto)return void(e&&e());var o=function(t,e){var o=$('<div><img src="images/transaction-success.png" height="30" width="30" /></div>');o.css({overflow:"hidden",width:0,position:"absolute",top:parseInt(t.css("height"))/2,left:parseInt(t.css("width"))-30,marginTop:-15,marginLeft:-15}),t.css({position:"absolute"}).append(o),o.animate({width:30,height:30},100,e)},a=function(t,e){var o=t.offset();t.css({width:parseInt(t.css("width"))}),t.css({position:"absolute",top:o.top,left:o.left}).parents(":not(#pagarme-checkout-ui)").css({position:"static"}),t.animate({top:"50%",marginTop:-t.height()},500,$.bez([0,0,0,1]),function(){setTimeout(e,0)})};if("pagarme-modal-box-step-choose-method"==t.step.attr("id")){var n=t.step.find("#pagarme-checkout-boleto-button"),i=n.find("button");i.animate({color:n.css("background-color")},400,function(){i.text("Transação autorizada"),i.animate({color:"#fff"},100,function(){n.animate({backgroundColor:"#6db963"},400,function(){$("#pagarme-checkout-amount-information, #pagarme-checkout-step-title").animate({opacity:0},"fast"),o(n),a(n,e)})})})}else{var c=t.step.find(".pagarme-modal-box-next-step");t.step.find(".pagarme-modal-box-next-step .icon-pg-checkout-continue");c.animate({color:c.css("background-color")},400,function(){c.text("Transação autorizada"),c.animate({backgroundColor:"#6db963",color:"#fff"},400,function(){$("#pagarme-checkout-amount-information, #pagarme-checkout-step-title, .pagarme-checkout-step-indicator").animate({opacity:0},"fast"),o(c),a(c,e)})})}},error:function(e,o){$("#pagarme-checkout-step-title").text(t.Animations.aux.oldTitle),$("#pagarme-checkout-amount-information").animate({opacity:0}),e.step.addClass("recover-from-error"),t.Animations.stepOut({element:e.step,direction:-1}),t.Animations.aux.buttonBuffer.html(t.Animations.aux.buttonTextBuffer),t.Animations.stepIn({element:$("#pagarme-checkout-error-container")},o)},dismissError:function(e){$("#pagarme-checkout-amount-information").animate({opacity:1});var o=$(".pagarme-checkout-step.recover-from-error");o.removeClass("recover-from-error"),t.Animations.stepOut({element:$("#pagarme-checkout-error-container"),direction:1}),t.Animations.stepIn({element:o},function(){if("pagarme-modal-box-step-choose-method"==o.attr("id"))o.find("#pagarme-checkout-boleto-button .button-indicator").fadeIn(),o.find("#pagarme-checkout-boleto-button").addClass("darker-hover arrow").css({borderTopRightRadius:0,borderTopLeftRadius:0}),o.find("#pagarme-checkout-card-button").slideDown(e);else{var a=o.find("button");o.find("#pagarme-checkout-card-container, .pagarme-checkout-input-container").animate({opacity:1},600),o.animate({height:t.Animations.aux.oldStepHeight},600,function(){o.css({overflow:"visible"}),a.css({position:"static"}),e&&e()})}})}},t.Animations.aux=t.Animations.aux||{}}(PagarMe.Checkout);